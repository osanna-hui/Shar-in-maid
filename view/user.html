<!DOCTYPE html>
<html>
    <head>
        <title>Shar'n Maid | Profile</title>
        <link href="../css/bootstrap.css" rel="stylesheet">
        <link href="../css/styles.css" rel="stylesheet">
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600,600italic,700' rel='stylesheet' type='text/css'>
    </head>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js'></script>
    <body>

      <form class="login_form" role="form">
        <div class="form-group">
        <input class="form-control" id='username' type='text' placeholder='USERNAME'/>
        <input class="form-control" id='password' type='password' placeholder='PASSWORD'/>
        <button class="btn btn-default" id='loginbut'>Login</button>
        <hr/></div></form>
        <div id='profile'>
        </div>
        <hr/>

        <!--update-->
        <form class="update_form" role="form">
          <div class="form-group">
            <input class="form-control" id='updated_username' type='text' placeholder='USERNAME'/>
            <input class="form-control" id='updated_password' type='password' placeholder='PASSWORD'/>
            <input class="form-control" id='updated_firstname' type='text' placeholder='FIRSTNAME'/>
            <input class="form-control" id='updated_lastname' type='text' placeholder='LASTNAME'/>
            <input class="form-control" id='updated_email' type='text' placeholder='EMAIL'/>
            <input class="form-control" id='updated_address' type='text' placeholder='ADDRESS'/>
            <input class="form-control" id='updated_city' type='text' placeholder='CITY'/>
            <input class="form-control" id='updated_profileimg' type='text' placeholder='IMG PATH SOMETHING'/>

            <button class="btn btn-default" id='update_userbut'>UPDATE USER</button>
          </div>
        </form>
    
    </body>
    <script>
        $(document).ready(function(){
            
            //var user_id = -1;
            var editDiv = null;
            //USER LOGIN
            document.getElementById("loginbut").onclick = function(){
                //ajax
                $.ajax({
                    url:"../controller/user_c.php",
                    dataType:"json",
                    type:"POST",
                    data:{
                        method:"login",
                        username:document.getElementById("username").value,
                        password:document.getElementById("password").value,
                        //user_id:user_id
                    },
                    success:function(resp){
                        alert("USER LOGGED IN!");
                        console.log(resp);
                        //user_id = resp[0].user_id;
                        
                           var br = document.createElement("br");
                           var profile = document.getElementById("profile");
                           //profile.innerHTML = resp;
                           var username = document.createElement("h2");
                           username.innerHTML = resp[0].username;
                           profile.appendChild(username);
                           profile.appendChild(br);
                           var firstname = document.createElement("h2");
                           firstname.innerHTML = resp[0].firstname;
                           profile.appendChild(firstname);
                           profile.appendChild(br);
                           var lastname = document.createElement("h2");
                           lastname.innerHTML = resp[0].lastname;
                           profile.appendChild(lastname);
                           profile.appendChild(br);
                           var email = document.createElement("h2");
                           email.innerHTML = resp[0].email;
                           profile.appendChild(email);
                           profile.appendChild(br);
                           var address = document.createElement("h2");
                           address.innerHTML = resp[0].address;
                           profile.appendChild(address);
                           profile.appendChild(br);
                           var city = document.createElement("h2");
                           city.innerHTML = resp[0].city;
                           profile.appendChild(city);
                           profile.appendChild(br);
                           document.getElementById("update_userbut").onclick = function(){
                    //update the username
                              console.log("click");
                             $.ajax({
                                 url:"../controller/user_c.php",
                                 type:"POST",
                                 dataType:"json",
                                 data:{
                                     method:"update_user",
                                     user_id:resp[0].user_id,
                                     username:document.getElementById("updated_username").value,
                                     password:document.getElementById("updated_password").value,
                                     firstname:document.getElementById("updated_firstname").value,
                                     lastname:document.getElementById("updated_lastname").value,
                                     email:document.getElementById("updated_email").value,
                                     address:document.getElementById("updated_address").value,
                                     city:document.getElementById("updated_city").value,
                                     profileimg:document.getElementById("updated_profileimg").value
                                 },
                                 
                                 success:function(resp){
                                     //console.log(resp);
                                     alert("UPDATED!");
                                     //editDiv.innerHTML = document.getElementById("user_input").value
                                 }
                             });
                          }
                    } 
                });
            }
        });
    </script>

</html>